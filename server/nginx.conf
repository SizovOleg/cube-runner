# Nginx конфигурация для Cube Runner
# Добавить в /etc/nginx/sites-enabled/default или отдельный файл
#
# Путь деплоя: /var/www/games/cube-runner/

location /games/cube-runner/ {
    alias /var/www/games/cube-runner/;
    index index.html;

    # SPA fallback — все маршруты → index.html
    try_files $uri $uri/ /games/cube-runner/index.html;

    # Кеширование статики
    location ~* \.(js|css|png|jpg|jpeg|gif|svg|ico|woff2?)$ {
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # Отключить кеш для index.html (чтобы обновления применялись сразу)
    location = /games/cube-runner/index.html {
        expires -1;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # Gzip
    gzip on;
    gzip_types text/html text/css application/javascript application/json;
    gzip_min_length 256;
}
